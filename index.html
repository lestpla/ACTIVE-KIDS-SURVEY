<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Activismo Juvenil ‚Äî Test de Perfil (3¬∫ ESO)</title>
  <meta name="description" content="Encuesta visual para 3¬∫ ESO sobre implicaci√≥n social con perfil final." />

  <style>
    :root{
      /* Light, colorful UI */
      --bgA:#F7F7FF;
      --bgB:#F1FBFF;

      --card: rgba(255,255,255,.78);
      --card2: rgba(255,255,255,.62);
      --stroke: rgba(20,20,50,.12);

      --txt: rgba(10,10,25,.92);
      --mut: rgba(10,10,25,.68);
      --mut2: rgba(10,10,25,.48);

      --shadow: 0 20px 60px rgba(10,20,40,.12);
      --r1: 18px;
      --r2: 26px;

      /* Accent palette */
      --p:#7C3AED;   /* purple */
      --c:#06B6D4;   /* cyan */
      --g:#10B981;   /* green */
      --y:#F59E0B;   /* amber */
      --pk:#F43F5E;  /* rose */
      --o:#FB923C;   /* orange */
      --b:#2563EB;   /* blue */

      --focus: 0 0 0 4px rgba(6,182,212,.22);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--txt);
      background:
        radial-gradient(900px 520px at 10% 10%, rgba(124,58,237,.16), transparent 60%),
        radial-gradient(900px 560px at 90% 20%, rgba(6,182,212,.16), transparent 60%),
        radial-gradient(900px 650px at 55% 110%, rgba(244,63,94,.12), transparent 55%),
        linear-gradient(180deg, var(--bgA), var(--bgB));
      overflow-x:hidden;
    }

    /* floating confetti shapes */
    .shape{
      position: fixed;
      width: 520px; height: 520px;
      border-radius: 999px;
      filter: blur(18px);
      opacity: .55;
      pointer-events:none;
      animation: floaty 14s ease-in-out infinite;
      mix-blend-mode: multiply;
    }
    .s1{left:-240px; top:-260px; background: radial-gradient(circle at 30% 30%, rgba(6,182,212,.35), rgba(124,58,237,.18), transparent 60%);}
    .s2{right:-260px; top:30px; background: radial-gradient(circle at 30% 30%, rgba(244,63,94,.22), rgba(245,158,11,.20), transparent 62%); animation-duration: 18s;}
    .s3{left: 32%; bottom:-330px; background: radial-gradient(circle at 30% 30%, rgba(16,185,129,.22), rgba(37,99,235,.18), transparent 62%); animation-duration: 20s;}
    @keyframes floaty{
      0%,100%{ transform: translate3d(0,0,0) scale(1); }
      50%{ transform: translate3d(18px,-16px,0) scale(1.05); }
    }

    .wrap{
      max-width: 1060px;
      margin: 0 auto;
      padding: 26px 18px 90px;
      position: relative;
      z-index: 1;
    }

    .top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 14px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      padding: 10px 12px;
      border: 1px solid var(--stroke);
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.55));
      box-shadow: 0 14px 40px rgba(10,20,40,.10);
      backdrop-filter: blur(10px);
    }

    .logo{
      width: 44px; height: 44px;
      border-radius: 16px;
      display:grid; place-items:center;
      border: 1px solid rgba(20,20,50,.10);
      background:
        radial-gradient(circle at 30% 30%, rgba(6,182,212,.22), rgba(124,58,237,.18)),
        linear-gradient(135deg, rgba(244,63,94,.12), rgba(16,185,129,.10));
    }
    .brand h1{margin:0;font-size:14px;letter-spacing:.2px}
    .brand p{margin:0;font-size:12px;color:var(--mut2)}

    .chip{
      display:inline-flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.62);
      color: var(--mut);
      font-size: 12px;
      box-shadow: 0 10px 26px rgba(10,20,40,.07);
      white-space:nowrap;
    }
    .spark{
      width: 10px; height: 10px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(16,185,129,1), rgba(6,182,212,.7));
      box-shadow: 0 0 0 5px rgba(16,185,129,.14);
    }

    .hero{
      border: 1px solid var(--stroke);
      border-radius: var(--r2);
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.58));
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      overflow:hidden;
      position: relative;
    }
    .heroInner{
      padding: 18px;
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
      align-items:stretch;
    }
    @media (max-width: 900px){
      .heroInner{grid-template-columns: 1fr;}
    }

    .hero h2{
      margin:0 0 8px;
      font-size: 28px;
      letter-spacing: .2px;
      line-height: 1.12;
    }
    .hero .sub{
      margin:0 0 12px;
      color: var(--mut);
      line-height: 1.55;
      font-size: 14.5px;
    }

    .pillRow{display:flex; flex-wrap:wrap; gap:8px; margin-top: 10px;}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.60);
      color: var(--mut);
      font-size: 12px;
    }

    .mini{
      border: 1px solid var(--stroke);
      border-radius: var(--r1);
      background: rgba(255,255,255,.66);
      padding: 14px;
      position: relative;
      overflow:hidden;
    }
    .mini h3{margin:0 0 8px; font-size: 14px;}
    .mini ul{margin:0; padding-left:18px; color: var(--mut); font-size: 12.8px; line-height: 1.55;}
    .mini li{margin:6px 0;}
    .mini .note{
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px dashed rgba(20,20,50,.16);
      color: var(--mut2);
      font-size: 12px;
      background: rgba(255,255,255,.55);
    }

    /* cute illustration row */
    .illusRow{
      display:flex; flex-wrap:wrap; gap:10px;
      align-items:center;
      margin-top: 10px;
    }
    .illus{
      display:flex; align-items:center; gap:10px;
      border: 1px solid var(--stroke);
      border-radius: 999px;
      padding: 8px 10px;
      background: rgba(255,255,255,.60);
      color: var(--mut);
      font-size: 12px;
    }
    .illus svg{display:block}

    /* main card */
    .card{
      margin-top: 14px;
      border: 1px solid var(--stroke);
      border-radius: var(--r2);
      background: linear-gradient(180deg, rgba(255,255,255,.82), rgba(255,255,255,.58));
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }

    .head{
      padding: 14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      border-bottom: 1px solid rgba(20,20,50,.08);
      background: linear-gradient(90deg, rgba(124,58,237,.08), rgba(6,182,212,.07), rgba(16,185,129,.06), rgba(245,158,11,.06));
      flex-wrap: wrap;
    }

    .leftHead{display:flex; gap:10px; align-items:center; flex-wrap:wrap;}
    .tag{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(20,20,50,.12);
      background: rgba(255,255,255,.66);
      color: var(--mut);
      font-size: 12px;
    }
    .tag strong{color: rgba(10,10,25,.92); font-weight:900}

    .prog{
      display:flex; align-items:center; gap:10px;
      min-width: 260px;
    }
    .bar{
      flex:1;
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(20,20,50,.12);
      background: rgba(255,255,255,.55);
      overflow:hidden;
    }
    .fill{
      height:100%;
      width:0%;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(124,58,237,.90), rgba(6,182,212,.85), rgba(16,185,129,.85), rgba(245,158,11,.82), rgba(244,63,94,.78));
      transition: width .35s ease;
    }
    .ptxt{font-size:12px; color: var(--mut); white-space:nowrap;}

    .body{padding: 16px}

    .qTitle{margin:0 0 10px; font-size: 18.5px; letter-spacing:.2px;}
    .qHint{margin:0 0 14px; color: var(--mut); font-size: 13.6px; line-height: 1.50;}

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 760px){ .grid{grid-template-columns: 1fr;} }

    .opt{
      display:flex;
      gap: 12px;
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(20,20,50,.12);
      background: rgba(255,255,255,.66);
      cursor: pointer;
      user-select: none;
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
      position: relative;
      overflow:hidden;
      min-height: 82px;
      outline:none;
    }
    .opt:hover{
      transform: translateY(-1px);
      border-color: rgba(6,182,212,.35);
      box-shadow: 0 12px 24px rgba(10,20,40,.10);
    }
    .opt:focus-visible{ box-shadow: var(--focus); }

    .opt[data-selected="true"]{
      border-color: rgba(124,58,237,.45);
      background:
        linear-gradient(180deg, rgba(124,58,237,.10), rgba(6,182,212,.08));
      box-shadow: 0 0 0 3px rgba(124,58,237,.10) inset, 0 12px 28px rgba(10,20,40,.10);
    }

    .iconBox{
      width: 52px; height: 52px;
      border-radius: 18px;
      display:grid; place-items:center;
      border: 1px solid rgba(20,20,50,.10);
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.95), rgba(255,255,255,.60));
      flex: 0 0 auto;
    }
    .txt{min-width:0}
    .txt strong{display:block; font-size: 14.2px}
    .txt span{display:block; margin-top:3px; color: var(--mut); font-size: 13px; line-height: 1.35}

    .btnRow{
      margin-top: 14px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap: wrap;
    }
    .btn{
      appearance:none;
      border: 1px solid rgba(20,20,50,.12);
      background: rgba(255,255,255,.70);
      color: var(--txt);
      padding: 10px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-weight: 900;
      font-size: 13px;
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
      display:inline-flex; align-items:center; gap:10px;
      user-select:none;
      box-shadow: 0 10px 18px rgba(10,20,40,.06);
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(6,182,212,.35);
      box-shadow: 0 14px 24px rgba(10,20,40,.10);
    }
    .btn:disabled{ opacity: .45; cursor:not-allowed; transform:none; box-shadow:none; }
    .primary{
      border-color: rgba(124,58,237,.35);
      background: linear-gradient(90deg, rgba(124,58,237,.20), rgba(6,182,212,.14));
    }
    .danger{
      border-color: rgba(244,63,94,.30);
      background: rgba(244,63,94,.10);
    }

    .small{
      margin-top: 10px;
      color: var(--mut2);
      font-size: 12.3px;
      line-height: 1.55;
    }

    /* RESULTS */
    .results{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 14px;
    }
    @media (max-width: 920px){ .results{grid-template-columns:1fr;} }

    .profile{
      border: 1px solid rgba(20,20,50,.12);
      border-radius: var(--r2);
      background: rgba(255,255,255,.72);
      padding: 16px;
      position: relative;
      overflow:hidden;
    }

    .profile::before{
      content:"";
      position:absolute; inset:-70px -70px auto auto;
      width: 300px; height: 300px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, rgba(6,182,212,.18), rgba(124,58,237,.14), transparent 70%);
      pointer-events:none;
    }

    .pTop{display:flex; align-items:center; gap: 12px; position:relative; z-index:1;}
    .avatar{
      width: 68px; height: 68px;
      border-radius: 22px;
      border: 1px solid rgba(20,20,50,.10);
      background:
        radial-gradient(circle at 30% 30%, rgba(245,158,11,.22), rgba(244,63,94,.14)),
        linear-gradient(135deg, rgba(6,182,212,.18), rgba(124,58,237,.14));
      box-shadow: 0 16px 36px rgba(10,20,40,.12);
      display:grid; place-items:center;
      overflow:hidden;
    }
    .pTitle{margin:0; font-size: 18.2px;}
    .pTag{margin:4px 0 0; color: var(--mut); font-size: 13px;}
    .pBody{margin-top: 12px; color: var(--mut); line-height: 1.65; font-size: 13.8px; position:relative; z-index:1;}

    .chips{display:flex; flex-wrap:wrap; gap:8px; margin-top: 12px; position:relative; z-index:1;}
    .cchip{
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(20,20,50,.12);
      background: rgba(255,255,255,.75);
      font-size: 12.3px;
      color: var(--mut);
    }

    .meters{
      border: 1px solid rgba(20,20,50,.12);
      border-radius: var(--r2);
      background: rgba(255,255,255,.70);
      padding: 14px;
    }
    .meters h4{margin:0 0 10px; font-size: 14px;}
    .rows{display:grid; gap: 10px;}
    .row{display:grid; grid-template-columns: 140px 1fr 44px; gap: 10px; align-items:center;}
    .lbl{font-size: 12px; color: var(--mut);}
    .mbar{
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(20,20,50,.12);
      background: rgba(255,255,255,.60);
      overflow:hidden;
    }
    .mbar i{
      display:block;
      height:100%;
      width:0%;
      border-radius:999px;
      transition: width .45s ease;
    }
    .val{font-size: 12px; color: var(--mut); text-align:right;}
    .printRow{display:flex; flex-wrap:wrap; gap:10px; margin-top:12px;}

    /* print */
    @media print{
      body{ background:white; color:black; }
      .shape,.top,.hero,.btnRow,.small,.printRow{ display:none !important; }
      .card{ box-shadow:none; border:1px solid #ccc; background:white; }
      .profile, .meters{ border:1px solid #ccc; background:white; }
    }
  </style>
</head>

<body>
  <div class="shape s1"></div>
  <div class="shape s2"></div>
  <div class="shape s3"></div>

  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <!-- meg√°fono (dibujo) -->
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
            <path d="M4 11v2a3 3 0 0 0 3 3h2l2 4h2l-1.2-4.8L20 16V8l-6.2 1.8L14 5h-2l-2 4H7a3 3 0 0 0-3 3Z"
              stroke="rgba(10,10,25,.85)" stroke-width="1.7" stroke-linejoin="round"/>
            <path d="M20 8v8" stroke="rgba(6,182,212,.95)" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <div>
          <h1>Activismo Juvenil</h1>
          <p>Test de perfil ‚Ä¢ 3¬∫ ESO</p>
        </div>
      </div>

      <div class="chip">
        <span class="spark"></span>
        6‚Äì8 minutos ‚Ä¢ Sin respuestas ‚Äúbuenas/malas‚Äù
      </div>
    </div>

    <section class="hero" aria-label="Introducci√≥n">
      <div class="heroInner">
        <div>
          <h2>¬øC√≥mo participas cuando algo importa?</h2>
          <p class="sub">
            Responde situaciones reales del instituto y redes. Al final tendr√°s un <strong>perfil</strong> con puntos fuertes
            y una idea concreta para tu ‚Äúsiguiente paso‚Äù.
          </p>

          <div class="pillRow">
            <span class="pill">üé® Visual y moderno</span>
            <span class="pill">‚ö° R√°pido</span>
            <span class="pill">üß† Reflexivo</span>
            <span class="pill">üó£Ô∏è Debate final opcional</span>
          </div>

          <div class="illusRow" aria-label="Dibujos">
            <span class="illus">${inlineBadge("VOZ","--c")}</span>
            <span class="illus">${inlineBadge("INFO","--y")}</span>
            <span class="illus">${inlineBadge("ACCI√ìN","--g")}</span>
            <span class="illus">${inlineBadge("LIDERAZGO","--p")}</span>
            <span class="illus">${inlineBadge("CUIDADO","--pk")}</span>
          </div>
        </div>

        <div class="mini">
          <h3>C√≥mo usarlo en clase</h3>
          <ul>
            <li>Individual (m√≥vil/Chromebook) o proyectado.</li>
            <li>Al final: captura de pantalla del perfil.</li>
            <li>Mini-reflexi√≥n: ‚ÄúHoy soy‚Ä¶ Ma√±ana puedo‚Ä¶‚Äù</li>
          </ul>
          <div class="note">Privacidad: no se guardan datos. Todo queda en este dispositivo.</div>
        </div>
      </div>
    </section>

    <section class="card" id="surveyCard" role="region" aria-label="Encuesta">
      <div class="head">
        <div class="leftHead">
          <span class="tag"><strong id="qLabel">Pregunta</strong></span>
          <span class="tag" id="topicTag">Tema</span>
        </div>

        <div class="prog" aria-label="Progreso">
          <div class="bar" aria-hidden="true"><div class="fill" id="fill"></div></div>
          <div class="ptxt" id="ptxt">0 / 0</div>
        </div>
      </div>

      <div class="body" id="body"></div>
    </section>

    <section class="card" id="resultCard" style="display:none" role="region" aria-label="Resultados">
      <div class="head">
        <div class="leftHead">
          <span class="tag"><strong>Tu perfil</strong></span>
          <span class="tag">Resultado</span>
        </div>
        <div class="prog"><div class="ptxt">Completado</div></div>
      </div>

      <div class="body" id="resultBody"></div>
    </section>

    <div class="small">
      Consejo: si quieres cambiar preguntas, edita el bloque <code>QUESTIONS</code> dentro de este mismo archivo.
    </div>
  </div>

  <script>
    /******************** Inline badge drawings (SVG) ********************/
    function inlineBadge(text, cssVar){
      const col = getComputedStyle(document.documentElement).getPropertyValue(cssVar).trim() || "#06B6D4";
      return `
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M12 2l2.7 6.2L21 9l-5 4.2L17.4 20 12 16.8 6.6 20 8 13.2 3 9l6.3-.8L12 2z"
            stroke="${col}" stroke-width="2" stroke-linejoin="round"/>
        </svg>
        ${escapeHtml(text)}
      `;
    }

    function escapeHtml(s){
      return String(s ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    /******************** CONFIG (CONSERVA CONTENIDO) ********************/
    const DIMENSIONS = [
      { key:"voz",     label:"Voz",        grad:"linear-gradient(90deg, rgba(6,182,212,.95), rgba(124,58,237,.55))" },
      { key:"accion",  label:"Acci√≥n",     grad:"linear-gradient(90deg, rgba(16,185,129,.95), rgba(6,182,212,.45))" },
      { key:"cuidado", label:"Cuidado",    grad:"linear-gradient(90deg, rgba(244,63,94,.95), rgba(245,158,11,.35))" },
      { key:"lider",   label:"Liderazgo",  grad:"linear-gradient(90deg, rgba(124,58,237,.95), rgba(244,63,94,.45))" },
      { key:"info",    label:"Info",       grad:"linear-gradient(90deg, rgba(245,158,11,.95), rgba(6,182,212,.35))" },
    ];

    // Small icon set (SVG drawings) for options
    const ICONS = {
      mic:  svgIcon("M12 2a3 3 0 0 1 3 3v6a3 3 0 0 1-6 0V5a3 3 0 0 1 3-3z","M19 11a7 7 0 0 1-14 0","M12 18v4","M8 22h8"),
      bolt: svgIcon("M13 2L3 14h7l-1 8 12-14h-7l-1-6Z"),
      heart:svgIcon("M12 21s-7-4.6-9.2-9C1.2 8.7 3.2 6 6.2 6c1.7 0 3 .8 3.8 2 0 0 .9-2 3.9-2 3 0 5 2.7 3.4 6-2.2 4.4-9.2 9-9.2 9Z"),
      search:svgIcon("M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z","M16.2 16.2 21 21"),
      flag: svgIcon("M5 3v18","M5 4h11l-1.5 3L16 10H5"),
      tools:svgIcon("M14 7l3 3-7.5 7.5H6.5V14.5L14 7Z","M13 6l2-2 5 5-2 2"),
      chat: svgIcon("M7 8h10","M7 12h7","M21 12a8 8 0 0 1-8 8H8l-5 3 1.4-4.2A8 8 0 1 1 21 12Z"),
    };

    function svgIcon(...paths){
      const p = paths.map(d => `<path d="${d}" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"></path>`).join("");
      return `<svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">${p}</svg>`;
    }

    /* ==== MISMO CONTENIDO (6 preguntas 3¬∫ ESO) ==== */
    const QUESTIONS = [
      {
        topic: "Instituto",
        title: "Ves un comentario ofensivo hacia alguien en clase. ¬øQu√© haces primero?",
        hint: "Tu primera reacci√≥n, sin pensar demasiado.",
        options: [
          { icon:"mic",  title:"Lo paro con respeto", desc:"Digo algo tipo: ‚ÄúEso no va‚Äù, sin montar show.", pts:{ voz:2, lider:1 } },
          { icon:"heart",title:"Me acerco a la persona", desc:"Le pregunto si est√° bien y le apoyo.", pts:{ cuidado:2, voz:1 } },
          { icon:"chat", title:"Lo hablo despu√©s", desc:"Busco el momento para hablar con calma.", pts:{ voz:2, info:1 } },
          { icon:"bolt", title:"Pido ayuda ya", desc:"Aviso a un adulto si la situaci√≥n es grave.", pts:{ accion:2, lider:1 } },
        ]
      },
      {
        topic: "Redes",
        title: "Te llega un v√≠deo ‚Äúviral‚Äù sobre un tema social. ¬øQu√© haces?",
        hint: "Piensa en TikTok/IG/YouTube.",
        options: [
          { icon:"search",title:"Compruebo si es real", desc:"Busco fuentes antes de compartir.", pts:{ info:2, voz:1 } },
          { icon:"mic",  title:"Comento con cabeza", desc:"Intento aportar algo √∫til y respetuoso.", pts:{ voz:2, cuidado:1 } },
          { icon:"flag", title:"Lo reporto si hace da√±o", desc:"Uso herramientas si hay acoso/odio.", pts:{ accion:1, info:1 } },
          { icon:"bolt", title:"Hago un contra-mensaje", desc:"Creo un post/reel con otra mirada.", pts:{ lider:2, voz:1 } },
        ]
      },
      {
        topic: "Participaci√≥n",
        title: "Si te piden ayudar en una actividad del centro, t√∫‚Ä¶",
        hint: "Elige lo que m√°s se parece a ti.",
        options: [
          { icon:"tools",title:"Me encargo de la parte pr√°ctica", desc:"Montaje, log√≠stica, materiales.", pts:{ accion:2, lider:1 } },
          { icon:"mic",  title:"Me encargo de difundir", desc:"Carteles, redes, presentaciones.", pts:{ voz:2, info:1 } },
          { icon:"heart",title:"Me encargo de que nadie quede fuera", desc:"Bienvenida, apoyo, ambiente.", pts:{ cuidado:2, voz:1 } },
          { icon:"search",title:"Me encargo de investigar", desc:"Datos, ideas, propuestas realistas.", pts:{ info:2, accion:1 } },
        ]
      },
      {
        topic: "Conflicto",
        title: "Tu grupo discute y nadie se entiende. ¬øQu√© haces t√∫?",
        hint: "En trabajos o debates.",
        options: [
          { icon:"chat", title:"Ordeno turnos para hablar", desc:"Que todos puedan decir algo.", pts:{ voz:2, cuidado:1 } },
          { icon:"tools",title:"Divido tareas claras", desc:"Roles simples para avanzar.", pts:{ accion:2, lider:1 } },
          { icon:"search",title:"Pido evidencias", desc:"¬øQu√© datos tenemos? ¬øQu√© funciona?", pts:{ info:2 } },
          { icon:"bolt", title:"Decido y tiro", desc:"Propongo un plan y lo lanzo.", pts:{ lider:2, accion:1 } },
        ]
      },
      {
        topic: "Impacto",
        title: "¬øQu√© proyecto te motiva m√°s ahora mismo?",
        hint: "El que m√°s te apetece probar.",
        options: [
          { icon:"tools",title:"Mejorar algo del centro", desc:"Reciclaje, limpieza, mural, patio.", pts:{ accion:2, lider:1 } },
          { icon:"mic",  title:"Campa√±a creativa", desc:"V√≠deo/c√≥mic/posters sobre un tema.", pts:{ voz:2, info:1 } },
          { icon:"heart",title:"Red de apoyo", desc:"Bienvenida, mediaci√≥n, compa√±erismo.", pts:{ cuidado:2, voz:1 } },
          { icon:"search",title:"Investigar y proponer", desc:"Encuesta, datos, soluciones realistas.", pts:{ info:2, accion:1 } },
        ]
      },
      {
        topic: "Tu siguiente paso",
        title: "Cuando algo me da miedo o pereza, lo que m√°s me ayuda es‚Ä¶",
        hint: "S√© honesto/a, esto es para crecer.",
        options: [
          { icon:"heart",title:"Tener a alguien conmigo", desc:"Con apoyo, me atrevo.", pts:{ cuidado:1, lider:1 } },
          { icon:"search",title:"Saber exactamente qu√© hacer", desc:"Un paso peque√±o y claro.", pts:{ info:2 } },
          { icon:"tools",title:"Ver resultados r√°pido", desc:"Me motiva notar impacto.", pts:{ accion:2 } },
          { icon:"bolt", title:"Sentir que importa", desc:"Si tiene sentido, me muevo.", pts:{ lider:2, voz:1 } },
        ]
      }
    ];

    /* ==== MISMO CONTENIDO (perfiles) ==== */
    const PROFILES = [
      {
        id:"La Voz que Activa",
        emoji:"üé§",
        tag:"Conectas gente con ideas. Tu fuerza es comunicar sin destruir.",
        match: s => topKey(s)==="voz",
        desc:"Te sale hablar, explicar, defender y crear cultura. Cuando lo haces bien, abres puertas. Tu reto: que tus palabras terminen en acci√≥n concreta.",
        strengths:["Comunicas con impacto","Das voz a otros","Sabes debatir"],
        next:["Convierte tu mensaje en una acci√≥n (mini reto semanal)","Antes de compartir: verifica 1 fuente","Practica ‚Äúdiscrepar sin atacar‚Äù"],
      },
      {
        id:"La Persona de Acci√≥n",
        emoji:"üõ†Ô∏è",
        tag:"Haces que las cosas pasen. Tu fuerza es lo pr√°ctico.",
        match: s => topKey(s)==="accion",
        desc:"Te va la log√≠stica, el ‚Äúvamos a hacerlo‚Äù, construir, organizar y mejorar. Tu reto: escuchar antes de ejecutar y sumar m√°s gente al plan.",
        strengths:["Eres resolutivo/a","Organizas recursos","Cierras tareas"],
        next:["Invita a alguien nuevo al equipo","Haz una prueba peque√±a antes de escalar","Define roles simples en 1 minuto"],
      },
      {
        id:"Quien Cuida al Grupo",
        emoji:"üíõ",
        tag:"Creas seguridad y pertenencia. Eso tambi√©n es liderazgo.",
        match: s => topKey(s)==="cuidado",
        desc:"T√∫ detectas qui√©n est√° fuera, qui√©n se calla y qui√©n se rompe. Tu reto: poner l√≠mites y pedir apoyo para no cargar con todo.",
        strengths:["Empat√≠a real","Generas confianza","Incluyes a otros"],
        next:["Pon un l√≠mite: ‚Äúhoy puedo hasta aqu√≠‚Äù","Pide a otro que te ayude","Prop√≥n una rutina (buddy/check-in)"],
      },
      {
        id:"Liderazgo con Energ√≠a",
        emoji:"‚ö°",
        tag:"Te mueves r√°pido y arrastras al grupo. Bien usado, es oro.",
        match: s => topKey(s)==="lider",
        desc:"Te sale tomar iniciativa, empujar y movilizar. Tu reto: frenar 10 segundos para escuchar y evitar ‚Äúatropellar‚Äù a otros.",
        strengths:["Inicias y motivas","Tomas decisiones","Sostienes el ritmo"],
        next:["Pregunta: ‚Äú¬øQui√©n no ha hablado?‚Äù","Define 3 pasos y 1 responsable por paso","Elige 1 tema y s√© constante"],
      },
      {
        id:"Mente Estrat√©gica",
        emoji:"üîé",
        tag:"Piensas con datos y cabeza. Tu fuerza es hacerlo inteligente.",
        match: s => topKey(s)==="info",
        desc:"Te gusta entender el tema, comprobar, investigar y mejorar la calidad. Tu reto: salir de la teor√≠a y probar un paso peque√±o.",
        strengths:["Detectas fake news","Aportas claridad","Propones mejoras realistas"],
        next:["Explica tus hallazgos en 60 segundos","Prueba 1 acci√≥n peque√±a (piloto)","Ense√±a a otros a verificar fuentes"],
      },
    ];

    /******************** APP ********************/
    const surveyCard = document.getElementById("surveyCard");
    const body = document.getElementById("body");
    const resultCard = document.getElementById("resultCard");
    const resultBody = document.getElementById("resultBody");

    const qLabel = document.getElementById("qLabel");
    const topicTag = document.getElementById("topicTag");
    const fill = document.getElementById("fill");
    const ptxt = document.getElementById("ptxt");

    const state = {
      idx: 0,
      answers: Array(QUESTIONS.length).fill(null),
      scores: Object.fromEntries(DIMENSIONS.map(d=>[d.key,0])),
    };

    function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }

    function topKey(scores){
      const arr = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
      return arr[0][0];
    }

    function maxScore(){ return QUESTIONS.length * 2; }

    function percent(scores, key){
      const p = Math.round((scores[key] / maxScore()) * 100);
      return clamp(p, 0, 100);
    }

    function iconSvg(name){ return ICONS[name] || ICONS.chat; }

    function optColor(i){
      const palette = ["var(--c)","var(--g)","var(--pk)","var(--p)"];
      return palette[i % palette.length];
    }

    function render(){
      const q = QUESTIONS[state.idx];
      const total = QUESTIONS.length;
      const cur = state.idx + 1;

      qLabel.textContent = `Pregunta ${cur}`;
      topicTag.textContent = q.topic;

      ptxt.textContent = `${cur} / ${total}`;
      const w = total === 1 ? 100 : Math.round((state.idx/(total-1))*100);
      fill.style.width = `${w}%`;

      const selected = state.answers[state.idx];

      body.innerHTML = `
        <h3 class="qTitle">${escapeHtml(q.title)}</h3>
        <p class="qHint">${escapeHtml(q.hint || "")}</p>

        <div class="grid" role="list">
          ${q.options.map((o,i)=>`
            <div class="opt" role="listitem" tabindex="0"
                 data-i="${i}" data-selected="${selected===i}">
              <div class="iconBox" style="color:${optColor(i)}">
                ${iconSvg(o.icon)}
              </div>
              <div class="txt">
                <strong>${escapeHtml(o.title)}</strong>
                <span>${escapeHtml(o.desc)}</span>
              </div>
            </div>
          `).join("")}
        </div>

        <div class="btnRow">
          <button class="btn" id="back" ${state.idx===0 ? "disabled":""}>${arrowLeft()} Atr√°s</button>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <button class="btn danger" id="reset">${resetIcon()} Reiniciar</button>
            <button class="btn primary" id="next" ${selected===null ? "disabled":""}>
              ${state.idx===total-1 ? "Ver perfil " + checkIcon() : "Siguiente " + arrowRight()}
            </button>
          </div>
        </div>

        <div class="small">Elige lo que m√°s se parezca a ti <strong>hoy</strong>. Puedes cambiar con el tiempo.</div>
      `;

      body.querySelectorAll(".opt").forEach(el=>{
        el.addEventListener("click", ()=> choose(+el.dataset.i));
        el.addEventListener("keydown", (e)=>{
          if(e.key==="Enter" || e.key===" "){ e.preventDefault(); choose(+el.dataset.i); }
        });
      });

      document.getElementById("back").onclick = ()=> { if(state.idx>0){ state.idx--; render(); } };
      document.getElementById("reset").onclick = ()=> resetAll();
      document.getElementById("next").onclick = ()=> next();
    }

    function choose(i){
      state.answers[state.idx] = i;
      render();
    }

    function next(){
      if(state.answers[state.idx] === null) return;
      if(state.idx < QUESTIONS.length-1){
        state.idx++;
        render();
      }else{
        computeScores();
        showResults();
      }
    }

    function resetAll(){
      state.idx = 0;
      state.answers = Array(QUESTIONS.length).fill(null);
      state.scores = Object.fromEntries(DIMENSIONS.map(d=>[d.key,0]));
      resultCard.style.display = "none";
      surveyCard.style.display = "block";
      render();
      window.scrollTo({top:0,behavior:"smooth"});
    }

    function computeScores(){
      state.scores = Object.fromEntries(DIMENSIONS.map(d=>[d.key,0]));
      state.answers.forEach((a,qi)=>{
        const opt = QUESTIONS[qi].options[a];
        if(!opt || !opt.pts) return;
        for(const [k,v] of Object.entries(opt.pts)){
          state.scores[k] = (state.scores[k] || 0) + v;
        }
      });
    }

    function pickProfile(){
      const found = PROFILES.find(p=>p.match(state.scores));
      return found || PROFILES[0];
    }

    function showResults(){
      const p = pickProfile();
      surveyCard.style.display = "none";
      resultCard.style.display = "block";

      const bars = DIMENSIONS.map(d=>{
        const pct = percent(state.scores, d.key);
        return `
          <div class="row">
            <div class="lbl">${escapeHtml(d.label)}</div>
            <div class="mbar"><i style="width:${pct}%; background:${d.grad}"></i></div>
            <div class="val">${pct}%</div>
          </div>
        `;
      }).join("");

      resultBody.innerHTML = `
        <div class="results">
          <div class="profile">
            <div class="pTop">
              <div class="avatar" aria-hidden="true"><div style="font-size:30px">${escapeHtml(p.emoji)}</div></div>
              <div>
                <h3 class="pTitle">${escapeHtml(p.id)}</h3>
                <p class="pTag">${escapeHtml(p.tag)}</p>
              </div>
            </div>

            <div class="pBody">${escapeHtml(p.desc)}</div>

            <div class="chips" aria-label="Fortalezas">
              ${p.strengths.map(s=>`<span class="cchip">‚≠ê ${escapeHtml(s)}</span>`).join("")}
            </div>

            <div class="chips" aria-label="Siguiente paso">
              ${p.next.map(s=>`<span class="cchip">‚û°Ô∏è ${escapeHtml(s)}</span>`).join("")}
            </div>

            <div class="printRow">
              <button class="btn primary" id="again">${resetIcon()} Repetir</button>
              <button class="btn" id="print">${printIcon()} Imprimir / PDF</button>
              <button class="btn" id="copy">${copyIcon()} Copiar perfil</button>
            </div>

            <div class="small">Esto no es una etiqueta fija: es una ‚Äúfoto‚Äù de tu estilo hoy. Puedes entrenar otras habilidades.</div>
          </div>

          <div class="meters">
            <h4>Tu mezcla de habilidades</h4>
            <div class="rows">${bars}</div>
            <div class="small">Pista para debate: ¬øqu√© habilidad te gustar√≠a subir este trimestre?</div>
          </div>
        </div>
      `;

      document.getElementById("again").onclick = ()=> resetAll();
      document.getElementById("print").onclick = ()=> window.print();
      document.getElementById("copy").onclick = ()=> copyProfile(p);

      window.scrollTo({top:0,behavior:"smooth"});
    }

    async function copyProfile(p){
      const text = [
        `Mi perfil: ${p.id}`,
        p.tag,
        "",
        p.desc,
        "",
        "Fortalezas: " + p.strengths.join(", "),
        "Siguiente paso: " + p.next.join(" | ")
      ].join("\n");

      try{
        await navigator.clipboard.writeText(text);
        alert("Copiado. P√©galo en Classroom o en tu cuaderno.");
      }catch(e){
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        alert("Copiado. P√©galo en Classroom o en tu cuaderno.");
      }
    }

    // tiny svg helpers
    function arrowLeft(){ return `<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`; }
    function arrowRight(){ return `<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`; }
    function checkIcon(){ return `<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`; }
    function resetIcon(){ return `<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M3 12a9 9 0 1 0 3-6.7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M3 4v6h6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`; }
    function printIcon(){ return `<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M6 9V3h12v6" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M6 14h12v7H6v-7Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>`; }
    function copyIcon(){ return `<svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M9 9h10v10H9V9Z" stroke="currentColor" stroke-width="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`; }

    // start
    render();
  </script>
</body>
</html>
